<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kla Sikor VIP - IT ZONE Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #f1c40f; --dark: #0f172a; --card-bg: #1e293b;
            --red: #e11d48; --green: #2ecc71; --vip: #a855f7;
        }

        body {
            font-family: 'Kantumruy Pro', sans-serif;
            background: radial-gradient(circle, #1e293b 0%, #0b0f1a 100%);
            color: white; margin: 0; padding-bottom: 160px;
            overflow-x: hidden;
        }

        /* Top Header */
        .header {
            background: rgba(15, 23, 42, 0.95);
            padding: 15px; border-bottom: 3px solid var(--gold);
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000;
        }

        .balance-txt { color: var(--gold); font-weight: bold; font-size: 1.3rem; }

        /* Audio Controls */
        .audio-controls {
            display: flex; gap: 10px; padding: 10px; justify-content: center;
            background: rgba(0,0,0,0.3); margin: 10px; border-radius: 10px;
        }

        /* Game Scene */
        .game-scene { position: relative; margin: 40px auto; width: 280px; height: 180px; display: flex; justify-content: center; }
        .bowl {
            position: absolute; top: -30px; width: 180px; height: 140px;
            background: linear-gradient(135deg, #fbbf24 0%, #b45309 100%);
            border-radius: 90px 90px 10px 10px; z-index: 20; border: 4px solid var(--gold);
            transition: 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .bowl.open { transform: translateY(-160px) rotate(-15deg); opacity: 0.3; pointer-events: none; }
        .shaking { animation: shake 0.1s infinite; }
        @keyframes shake { 0% {transform:translate(2px,2px)} 50% {transform:translate(-2px,-2px)} 100% {transform:translate(2px,-2px)} }

        .dice-container { display: flex; gap: 10px; z-index: 10; padding-top: 40px; }
        .dice { width: 55px; height: 55px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; }
        .dice img { width: 85%; }

        /* Betting Board */
        .board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 10px; max-width: 450px; margin: 0 auto; }
        .card { 
            background: var(--card-bg); border-radius: 12px; padding: 8px; text-align: center; 
            border: 3px solid transparent; cursor: pointer; position: relative; transition: 0.2s;
        }
        .card.selected { border-color: var(--gold); background: #334155; }
        .card img { width: 100%; border-radius: 8px; background: white; }
        .bet-badge { position: absolute; top: -5px; right: -5px; background: var(--red); padding: 2px 6px; border-radius: 8px; font-size: 0.7rem; border: 1px solid white; z-index: 5; }

        /* Share Area */
        #share-box {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            background: var(--card-bg); padding: 20px; border-radius: 20px; border: 3px solid var(--gold);
            z-index: 3000; text-align: center; width: 80%;
        }
        #share-box.active { transform: translate(-50%, -50%) scale(1); }
        .share-btn { padding: 10px; border-radius: 10px; border: none; color: white; margin: 5px; cursor: pointer; width: 120px; font-weight: bold; }
        .fb { background: #1877F2; } .tg { background: #0088cc; }

        /* Footer */
        .footer {
            position: fixed; bottom: 0; width: 100%; background: var(--dark);
            padding: 15px; border-top: 3px solid var(--gold); display: flex; flex-direction: column; align-items: center; gap: 10px; z-index: 1000;
        }
        .main-row { display: flex; gap: 10px; }
        input { width: 100px; padding: 10px; border-radius: 8px; border: none; text-align: center; font-weight: bold; }
        .btn-roll { background: var(--gold); color: black; padding: 10px 40px; border-radius: 8px; border: none; font-weight: bold; font-size: 1.1rem; cursor: pointer; }

        #msg { position: fixed; top: 25%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; padding: 15px 30px; border-radius: 15px; font-weight: bold; display: none; text-align: center; border: 4px solid white; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2500; display: none; }
    </style>
</head>
<body>

<div id="msg"></div>
<div class="overlay" id="overlay" onclick="closeShare()"></div>

<div id="share-box">
    <h3 id="share-title" style="color:var(--gold);"></h3>
    <p>á…áŸ‚á€ášáŸ†á›áŸ‚á€á—á¶á–á áŸá„á‡á¶á˜á½á™á˜á·ááŸ’áá—á€áŸ’áá·!</p>
    <div style="background: white; padding: 10px; border-radius: 10px; margin-bottom: 15px;">
        <img src="it_zone_logo.png" style="width: 50px;" onerror="this.src='https://via.placeholder.com/50?text=IT+ZONE'">
        <p style="color: black; font-weight: bold; margin: 5px 0;" id="share-amount"></p>
    </div>
    <button class="share-btn fb" onclick="shareSocial('fb')">Facebook</button>
    <button class="share-btn tg" onclick="shareSocial('tg')">Telegram</button>
    <button class="m-btn" style="display:block; width:100%; margin-top:10px; background:none; color:white; border:none; cursor:pointer;" onclick="closeShare()">á”áŸ„áŸ‡á”á„áŸ‹</button>
</div>

<div class="header">
    <div style="font-weight: bold; color: var(--gold);">IT ZONE GAMING</div>
    <div class="balance-txt">ğŸ’° <span id="balance">100,000</span> áŸ›</div>
</div>

<div class="audio-controls">
    <button class="m-btn" onclick="toggleAudio('bgMusic')">ğŸµ á…á˜áŸ’ášáŸ€á„: <span id="bgStatus">OFF</span></button>
    <button class="m-btn" onclick="toggleAudio('ambientSound')">ğŸ”Š áŸáŸ†á¡áŸá„á¢áŸŠá¼á¢áš: <span id="amStatus">OFF</span></button>
</div>

<div class="game-scene">
    <div style="position:absolute; bottom:0; width:220px; height:20px; background:#451a03; border-radius:50%; border:3px solid #92400e;"></div>
    <div class="dice-container">
        <div class="dice" id="d1">?</div>
        <div class="dice" id="d2">?</div>
        <div class="dice" id="d3">?</div>
    </div>
    <div class="bowl" id="bowl">
        <img src="it_zone_logo.png" style="width: 40px; opacity: 0.5;" onerror="this.style.display='none'">
        <span style="font-size: 0.7rem;">IT ZONE</span>
    </div>
</div>

<div class="board" id="board"></div>

<div class="footer">
    <div class="main-row">
        <input type="number" id="betInput" value="5000">
        <button class="btn-roll" onclick="playGame()" id="rollBtn">á€áŸ’ášá¡á»á€</button>
    </div>
    <div style="font-size: 0.7rem; color: #94a3b8;">Supported by Yah Rapha X Master Care</div>
</div>

<audio id="bgMusic" loop src="https://www.soundjay.com/free-music/sounds/ambient-1.mp3"></audio>
<audio id="ambientSound" loop src="https://www.soundjay.com/misc/sounds/crowd-talking-1.mp3"></audio>
<audio id="rollSnd" src="https://www.soundjay.com/misc/sounds/dice-roll-1.mp3"></audio>
<audio id="winSnd" src="https://www.soundjay.com/human/sounds/applause-01.mp3"></audio>

<script>
    const animals = [
        { id: 'tiger', name: 'ááŸ’á›á¶', img: 'tiger.png' },
        { id: 'gourd', name: 'áƒáŸ’á›áŸ„á€', img: 'gourd.png' },
        { id: 'chicken', name: 'á˜á¶á“áŸ‹', img: 'chicken.png' },
        { id: 'shrimp', name: 'á”á„áŸ’á€á„', img: 'shrimp.png' },
        { id: 'fish', name: 'ááŸ’ášá¸', img: 'fish.png' },
        { id: 'crab', name: 'á€áŸ’áá¶á˜', img: 'crab.png' }
    ];

    let balance = 100000;
    let bets = {};
    let lastWin = 0;

    function init() {
        const board = document.getElementById('board');
        animals.forEach(a => {
            board.innerHTML += `
                <div class="card" id="c-${a.id}" onclick="placeBet('${a.id}')">
                    <div class="bet-badge" id="b-${a.id}" style="display:none">0</div>
                    <img src="${a.img}" onerror="this.src='https://via.placeholder.com/100?text=${a.name}'">
                    <div style="font-size:0.8rem; font-weight:bold; margin-top:5px; color:var(--gold)">${a.name}</div>
                </div>
            `;
        });
        updateUI();
    }

    function toggleAudio(id) {
        const audio = document.getElementById(id);
        const status = document.getElementById(id === 'bgMusic' ? 'bgStatus' : 'amStatus');
        if (audio.paused) {
            audio.play();
            status.textContent = "ON";
            status.style.color = "var(--green)";
        } else {
            audio.pause();
            status.textContent = "OFF";
            status.style.color = "var(--red)";
        }
    }

    function placeBet(id) {
        let amt = parseInt(document.getElementById('betInput').value);
        if (balance < amt) return alert("á›á»á™á˜á·á“á‚áŸ’ášá”áŸ‹!");
        balance -= amt;
        bets[id] = (bets[id] || 0) + amt;
        updateUI();
    }

    function playGame() {
        if (Object.keys(bets).length === 0) return alert("á…á¶á€áŸ‹áŸá·á“á˜áŸ!");
        const btn = document.getElementById('rollBtn');
        const bowl = document.getElementById('bowl');
        const rollSnd = document.getElementById('rollSnd');

        btn.disabled = true;
        bowl.classList.remove('open');
        rollSnd.play();

        setTimeout(() => {
            bowl.classList.add('shaking');
            setTimeout(() => {
                bowl.classList.remove('shaking');
                let res = [];
                for(let i=1; i<=3; i++) {
                    const a = animals[Math.floor(Math.random()*6)];
                    res.push(a.id);
                    document.getElementById('d'+i).innerHTML = `<img src="${a.img}" onerror="this.parentElement.innerHTML='${a.name}'">`;
                }
                bowl.classList.add('open');
                checkResult(res);
                btn.disabled = false;
            }, 1500);
        }, 200);
    }

    function checkResult(res) {
        let win = 0;
        for(let id in bets) {
            const count = res.filter(r => r === id).length;
            if (count > 0) win += bets[id] + (bets[id] * count);
        }

        const m = document.getElementById('msg');
        m.style.display = 'block';
        if (win > 0) {
            balance += win;
            lastWin = win;
            document.getElementById('winSnd').play();
            m.style.background = 'var(--green)';
            m.innerHTML = `á…á¶á€áŸ‹á‘áŸ€áá¢á¼á“ á…á¶á€áŸ‹á‘áŸ€á! <br> áˆáŸ’á“áŸ‡ ${win.toLocaleString()}áŸ› <br> <button onclick="openShare()" style="background:white; border:none; padding:5px 10px; border-radius:5px; margin-top:5px; cursor:pointer;">á…áŸ‚á€ášáŸ†á›áŸ‚á€</button>`;
        } else {
            m.style.background = 'var(--red)';
            m.textContent = "á¢á‰áá¶á á¾á™á…á¶á€á»áŸ†á²áŸ’á™á…á¶á€áŸ‹!";
        }
        setTimeout(() => { if(win === 0) m.style.display = 'none'; }, 3000);
        bets = {};
        updateUI();
    }

    function updateUI() {
        document.getElementById('balance').textContent = balance.toLocaleString();
        animals.forEach(a => {
            const b = document.getElementById('b-'+a.id);
            if (bets[a.id]) {
                b.style.display = 'block';
                b.textContent = bets[a.id].toLocaleString();
            } else { b.style.display = 'none'; }
        });
    }

    // Share Logic
    function openShare() {
        document.getElementById('msg').style.display = 'none';
        document.getElementById('share-title').textContent = "ááŸ’á‰á»áŸ†á‘á¾á”ááŸ‚áˆáŸ’á“áŸ‡!";
        document.getElementById('share-amount').textContent = lastWin.toLocaleString() + " áŸ›";
        document.getElementById('share-box').classList.add('active');
        document.getElementById('overlay').style.display = 'block';
    }

    function closeShare() {
        document.getElementById('share-box').classList.remove('active');
        document.getElementById('overlay').style.display = 'none';
    }

    function shareSocial(platform) {
        const text = `ááŸ’á‰á»áŸ†á‘á¾á”ááŸ‚áˆáŸ’á“áŸ‡á›á»á™ ${lastWin.toLocaleString()}áŸ› á€áŸ’á“á»á„á áŸ’á‚áŸá˜ááŸ’á›á¶áŸáŸŠá¸á‚áŸ„ IT ZONE! áŸá¶á€á›áŸ’á”á„áŸáŸ†áá¶á„á‘á¶áŸ†á„á¢áŸáŸ‹á‚áŸ’á“á¶!`;
        const url = window.location.href;
        let link = "";
        if (platform === 'fb') link = `https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`;
        if (platform === 'tg') link = `https://t.me/share/url?url=${url}&text=${text}`;
        window.open(link, '_blank');
    }

    init();
</script>
</body>
</html>
